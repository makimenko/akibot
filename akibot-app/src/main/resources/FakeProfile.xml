<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd"
	profile="fake">



	<bean class="com.akibot.app.MessageConsumer">
	</bean>


	<bean
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="location">
			<value>application-fake.properties</value>
		</property>
	</bean>


	<bean id="mainGyroscope" class="com.akibot.device.fake.gyroscope.FakeGyroscope">
		<constructor-arg name="offset">
			<bean class="com.akibot.common.element.Vector3D" />
		</constructor-arg>
	</bean>

	<bean id="workflow" class="com.akibot.app.logic.WorkflowImpl">
	</bean>

	<bean id="worldContentDao" class="com.akibot.world.dao.WorldContentDaoImpl">
		<constructor-arg name="name" ref="worldNode" />
	</bean>

	<bean id="worldSynchronizer" class="com.akibot.app.logic.WorldSynchronizerImpl">
		<constructor-arg name="realtimeNotificationDelay"
			value="1000" />
	</bean>

	<!-- ====================== NODES: ============================ -->
	<!-- TODO: node name = bean name? -->

	<bean id="worldNode" class="com.akibot.world.dom.node.StandardNode">
		<constructor-arg name="name" value="worldNode" />
	</bean>

	<bean id="gridNode" class="com.akibot.world.dom.node.StandardNode">
		<constructor-arg name="name" value="gridNode" />
		<constructor-arg name="parentNode" ref="worldNode" />
		<property name="geometry">
			<bean class="com.akibot.world.dom.geometry.GridGeometry">
				<constructor-arg name="gridConfiguration">
					<bean class="com.akibot.world.dom.config.GridConfiguration">
						<constructor-arg name="cellCountX" value="${grid.cell.count.x}" />
						<constructor-arg name="cellCountY" value="${grid.cell.count.y}" />
						<constructor-arg name="cellSizeMm" value="${grid.cell.size}" />
						<constructor-arg name="maxObstacleCount" value="${grid.max.obstacle.count}" />
						<constructor-arg name="offsetVector">
							<bean class="com.akibot.common.element.Vector3D">
								<constructor-arg name="x"
									value="#{${grid.cell.count.x} * ${grid.cell.size} / 2}" />
								<constructor-arg name="y"
									value="#{${grid.cell.count.x} * ${grid.cell.size} / 2}" />
								<constructor-arg name="z" value="0" />
							</bean>
						</constructor-arg>
					</bean>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="robotNode" class="com.akibot.world.dom.node.StandardNode">
		<constructor-arg name="name" value="robotNode" />
		<constructor-arg name="parentNode" ref="gridNode" />
		<property name="geometry">
			<bean class="com.akibot.world.dom.geometry.ColladaGeometry">
				<property name="fileName" value="model/AkiBot.dae" />
			</bean>
		</property>
	</bean>

	<bean id="gyroscopeNode" class="com.akibot.world.dom.node.StandardNode">
		<constructor-arg name="name" value="gyroscopeNode" />
		<constructor-arg name="parentNode" ref="robotNode" />
		<property name="stickToParent" value="true" />

	</bean>

	<bean id="distanceCenterNode" class="com.akibot.world.dom.node.StandardNode">
		<constructor-arg name="name" value="distanceCenterNode" />
		<constructor-arg name="parentNode" ref="robotNode" />
	</bean>

</beans>